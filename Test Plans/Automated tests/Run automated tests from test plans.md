Running automated tests directly from Azure Test Plans provides flexibility and ease for testers who may not be familiar with running tests in Build or Release workflows. It also allows for on-demand testing of selected tests, rerunning specific tests, and maintaining end-to-end traceability of requirements. Follow the steps below to set up your environment and run automated tests from test plans in Azure DevOps.

## Prerequisites

1. **Connect to a project:** Ensure you are connected to a project. If not, create one.
2. **Added to a project:** Make sure you are added to a project. If not, get added by someone with the necessary permissions.
3. **Basic access or higher:** To view or run manual or automated tests, you must have Basic access or higher. For more information, see Manual test access and permissions.

Ensure you also have the following items:

- A test plan containing automated tests associated with automated test methods using Visual Studio 2017 or Visual Studio 2015 or earlier.
- A build pipeline generating builds with the test binaries.
- An app to test, which can be deployed as part of the build and release workflow and used for on-demand testing.
- Permissions to create and manage releases, edit a release environment, and manage deployment. For more information, see Set permissions for release pipelines and Release permissions.

## Set Up Your Environment

1. In the **Test Plans** page, choose your test plan, open the shortcut menu, and select **Test plan settings**.
    ![[Pasted image 20240312125846.png]]
2. In the **Test plan settings** dialog, select the build pipeline generating builds containing the test binaries. Choose a specific build number to test or let the system automatically use the latest build when tests are run.
    ![[Pasted image 20240312125852.png]]
3. You need a release pipeline created from the **Run automated tests from Test Manager** template to run tests from test plans in Azure Test Plans. If you have an existing release pipeline created using this template, select it. Otherwise, select **Create new** to create a new release pipeline with a single stage and the Visual Studio Test task already added.
    ![[Pasted image 20240312125950.png]]
    - Assign meaningful names to the release pipeline and stage as required.
    - If Visual Studio is not installed on the agent computer, add the **Visual Studio Test Platform Installer** task to the pipeline definition.
    - Add the **Visual Studio Test** task to the release pipeline and configure it based on your needs.
        ![[Pasted image 20240312130008.png]]
    - Choose the Agent job item and verify that the deployment queue is set to the one containing the machines where you want to run the tests.
        ![[Pasted image 20240312130112.png]]
    - Set up the agent to run interactively if running UI tests on physical browsers.
        ![[Pasted image 20240312130057.png]]
    - Save the release pipeline.
        
4. If you chose **Create new** in the **Test plan settings** dialog, return to the browser page containing your test plan settings. In the **Test plan settings** dialog, select the release pipeline and stage you saved.
    ![[Pasted image 20240312130037.png]]

## Run the Automated Tests

1. In the **Test Plans** web portal, open the test plan, and select a test suite containing the automated tests.
2. Select the test(s) you want to run, open the **Run** menu, and choose **Run test**.
    ![[Pasted image 20240312130124.png]]
3. The test binaries for these tests must be available in the build artifacts generated by your build pipeline.
    ![[Pasted image 20240312130129.png]]
4. Select **OK** to start the testing process. The system validates the stage, checks permissions, creates a test run, and triggers the creation of a release to the selected stage.
5. Select **View test run** to monitor the test progress and analyze failed tests. Test results include relevant information for debugging failed tests, such as error messages, stack traces, console logs, and attachments.
    ![[Pasted image 20240312130131.png]]
6. After test execution is complete, the **Runs** page of Azure Test Plans displays the test results. The **Run summary** page provides an overview of the run.
    ![[Pasted image 20240312130139.png]]
7. There's a link to the release used to run the tests, making it easy to find the release that ran the tests for later analysis.
    ![[Pasted image 20240312130141.png]]

## Frequently Asked Questions (FAQs)

### Q: What permissions do I need to run automated tests from Azure Test Plans?

A: You must be a Project Contributor or have permissions to create releases, manage releases, edit release stages, and manage deployment. For more information, see Set permissions for release pipelines and Release permissions.

### Q: Can I override the build or stage set at the test plan level for a specific instance of a test run?

A: Yes, you can use the **Run with options** command. Open the shortcut menu for the test suite, select **Run with options**, and configure the desired parameters.

### Q: Why use release stages to run tests?

A: Azure Pipelines offers a powerful orchestration workflow to obtain test binaries and run tests. This workflow shares concepts with scheduled testing, making it easy to adapt for users familiar with scheduled workflows. Additionally, it provides a rich set of tasks for activities before and after running tests.

### Q: How does selecting "Test run" in the Visual Studio Test task version 2 work?

A: The Test management subsystem uses the test run object to pass the list of tests selected for execution. The test task looks up the test run identifier, extracts test execution information, runs the tests, updates test run results, and sets test points associated with the test results in the test run.

### Q: Should the agent run in interactive mode or as a service?

A: If running UI tests, the agent on test machines must run in interactive mode with autologon enabled. For headless browsers, running as a service is acceptable.

### Q: Where can I find detailed documentation on running Selenium tests?

A: See Get started with Selenium testing.

### Q: What happens if I select multiple configurations for the same test?

A: The on-demand workflow is currently not configuration-aware.

### Q: Can I trigger and view results in Microsoft Test Manager?

A: No, Microsoft Test Manager doesn't support running automated tests against Team Foundation builds. It only works in the web-based interface for Azure Pipelines.

### Q: Can multiple testers run tests from different test suites or plans in parallel?

A: Yes, if the agent pool has sufficient agents and jobs are configured for parallel execution. Ensure testers don't run the same tests in parallel to avoid result overwrites.

### Q: How do I pass parameters to my test code from a build or release pipeline?

A: Use a runsettings file to pass values as parameters to your test code. Specify the runsettings file in the Visual Studio Test task.

### Q: What are common error scenarios to look out for if tests don't run?

A: Check issues related to linked build artifacts, permissions, test automation status, correct release stage, and Visual Studio Test task version. Analyze release logs for detailed information.